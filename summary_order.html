<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <title>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background: #f6f7fb;
        }

        .card-box {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, .05);
        }

        .small-text {
            font-size: 13px;
            color: #777;
        }
    </style>
</head>

<body>

    <!-- Navbar -->
    <nav class="navbar navbar-light bg-white shadow-sm">
        <div class="container">
            <a class="navbar-brand fw-bold" href="#">üì¶ ‡∫õ‡∫∞‡∫´‡∫ß‡∫±‡∫î‡∫Å‡∫≤‡∫ô‡∫™‡∫±‡ªà‡∫á‡∫ä‡∫∑‡ªâ</a>
            <a href="order.html" class="btn btn-sm btn-primary">+ ‡ªÄ‡∫û‡∫µ‡ªà‡∫°‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô‡∫™‡∫±‡ªà‡∫á‡∫ä‡∫∑‡ªâ‡ªÉ‡∫´‡∫°‡ªà</a>
        </div>
    </nav>

    <div class="container py-4">

        <div class="card card-box p-3">
            <h4 class="mb-3">üßæ ‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô‡∫™‡∫±‡ªà‡∫á‡∫ä‡∫∑‡ªâ‡∫ó‡∫±‡∫á‡∫´‡∫°‡∫ª‡∫î</h4>

            <div id="orderList"></div>
        </div>

    </div>

    <script>
        function loadOrders() {
            const orderList = document.getElementById('orderList');
            const orders = JSON.parse(localStorage.getItem('orders') || '[]');

            if (orders.length === 0) {
                orderList.innerHTML = '<p class="text-muted">‡∫ç‡∫±‡∫á‡∫ö‡ªç‡ªà‡∫°‡∫µ‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô</p>';
                return;
            }

            orderList.innerHTML = '';

            orders.forEach((order, index) => {
                const div = document.createElement('div');
                div.className = "border rounded p-3 mb-3";

                let itemsHTML = '';
                order.items.forEach((item, i) => {
                    itemsHTML += `
                        <li class="small-text">
                            ${item.name} √ó ${item.qty}
                            (‡∏ã‡∏∑‡πâ‡∏≠ ${item.priceBuy}) ‚Üí ‡∏Ç‡∏≤‡∏¢ ${item.priceSell}
                        </li>
                    `;
                });

                div.innerHTML = `
                    <div class="d-flex justify-content-between">
                        <div>
                            <b>‡∫ä‡∫∑‡ªà‡∫•‡∫π‡∫Å‡∫Ñ‡ªâ‡∫≤:</b> ${order.customerName || '-'}<br>
                            <span class="small-text">‡∫ß‡∫±‡∫ô‡∫ó‡∫µ‡∫™‡∫±‡ªà‡∫á‡∫ä‡∫∑‡ªâ: ${order.orderDate || '-'} </span><br>
                            <span class="small-text">‡∫ß‡∫±‡∫ô‡∫ó‡∫µ‡∫à‡∫±‡∫î‡∫™‡∫ª‡ªà‡∫á: ${order.shippingDate || '-'} </span><br>
                            <span class="small-text">‡∫™‡∫ª‡ªà‡∫á‡∫à‡∫≤‡∫Å: ${order.fromShop || '-'} </span>
                        </div>

                        <div class="text-end">
                            <h5 class="text-success">${order.totalPrice} ‡∫Å‡∫µ‡∫ö</h5>
                            <button class="btn btn-sm btn-danger" onclick="deleteOrder(${index})">‡∫•‡∫ª‡∫ö‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô</button>
                        </div>
                    </div>

                    <hr>
                    <ul>${itemsHTML}</ul>
                `;

                orderList.appendChild(div);
            });
        }

        function deleteOrder(index) {
            if (!confirm("‡∫ó‡ªà‡∫≤‡∫ô‡∫ï‡ªâ‡∫≠‡∫á‡∫Å‡∫≤‡∫ô‡∫•‡∫ª‡∫ö‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô‡∫™‡∫±‡ªà‡∫á‡∫ä‡∫∑‡ªâ‡∫ô‡∫µ‡ªâ‡∫´‡∫º‡∫∑‡∫ö‡ªç?")) return;

            let orders = JSON.parse(localStorage.getItem('orders') || '[]');
            orders.splice(index, 1);
            localStorage.setItem('orders', JSON.stringify(orders));

            loadOrders();
        }

        loadOrders();
    </script>

</body>

</html>